<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="506px" preserveAspectRatio="none" style="width:470px;height:506px;background:#FFFFFF;" version="1.1" viewBox="0 0 470 506" width="470px" zoomAndPan="magnify"><defs><filter height="300%" id="ftd956tahhfhi" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="487.1797" style="stroke:#A80036;stroke-width:1.0;" width="285.5" x="1" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="95.25" y="19.4951">IPF Application</text><rect fill="#FFFFFF" filter="url(#ftd956tahhfhi)" height="385.8672" style="stroke:#A80036;stroke-width:1.0;" width="10" x="227" y="95.3125"/><rect fill="#FFFFFF" filter="url(#ftd956tahhfhi)" height="123.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="411" y="166.0156"/><rect fill="#FFFFFF" filter="url(#ftd956tahhfhi)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="411" y="413.4766"/><rect fill="#FFFFFF" filter="url(#ftd956tahhfhi)" height="79.0547" style="stroke:#000000;stroke-width:2.0;" width="284.5" x="171.5" y="181.0156"/><rect fill="#FFFFFF" filter="url(#ftd956tahhfhi)" height="79.0547" style="stroke:#000000;stroke-width:2.0;" width="284.5" x="171.5" y="372.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="75" x2="75" y1="62.9609" y2="499.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="231.5" x2="231.5" y1="62.9609" y2="499.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="416" x2="416" y1="62.9609" y2="499.1797"/><rect fill="#FEFECE" filter="url(#ftd956tahhfhi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="136" x="5" y="26.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="12" y="47.8848">Client Camel Route</text><rect fill="#FEFECE" filter="url(#ftd956tahhfhi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="97" x="181.5" y="26.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="188.5" y="47.8848">IPF Producer</text><rect fill="#FEFECE" filter="url(#ftd956tahhfhi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="56" x="386" y="26.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="393" y="47.8848">Server</text><rect fill="#FFFFFF" filter="url(#ftd956tahhfhi)" height="385.8672" style="stroke:#A80036;stroke-width:1.0;" width="10" x="227" y="95.3125"/><rect fill="#FFFFFF" filter="url(#ftd956tahhfhi)" height="123.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="411" y="166.0156"/><rect fill="#FFFFFF" filter="url(#ftd956tahhfhi)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="411" y="413.4766"/><polygon fill="#A80036" points="215,91.3125,225,95.3125,215,99.3125,219,95.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="75" x2="221" y1="95.3125" y2="95.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="82" y="90.4561">Request</text><path d="M10,108.3125 L10,134.3125 L66,134.3125 L66,118.3125 L56,108.3125 L10,108.3125 " fill="#FBFB77" filter="url(#ftd956tahhfhi)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M56,108.3125 L56,118.3125 L66,118.3125 L56,108.3125 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="16" y="126.8076">.to(...)</text><polygon fill="#A80036" points="399,162.0156,409,166.0156,399,170.0156,403,166.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="237" x2="405" y1="166.0156" y2="166.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="244" y="161.1592">Request</text><path d="M171.5,181.0156 L244.5,181.0156 L244.5,189.0156 L234.5,199.0156 L171.5,199.0156 L171.5,181.0156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:2.0;" width="284.5" x="171.5" y="181.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="186.5" y="195.5107">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="60" x="259.5" y="194.4346">[n-1 times]</text><polygon fill="#A80036" points="248,217.7188,238,221.7188,248,225.7188,244,221.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="242" x2="410" y1="221.7188" y2="221.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="254" y="216.8623">Fragment of response</text><polygon fill="#A80036" points="399,248.0703,409,252.0703,399,256.0703,403,252.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="237" x2="405" y1="252.0703" y2="252.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="244" y="247.2139">Request for next fragment</text><polygon fill="#A80036" points="248,285.4219,238,289.4219,248,293.4219,244,289.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="242" x2="415" y1="289.4219" y2="289.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="254" y="284.5654">Last fragment of response</text><line style="stroke:#A80036;stroke-width:1.0;" x1="237" x2="279" y1="344.7734" y2="344.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="279" x2="279" y1="344.7734" y2="357.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="238" x2="279" y1="357.7734" y2="357.7734"/><polygon fill="#A80036" points="248,353.7734,238,357.7734,248,361.7734,244,357.7734" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="244" y="339.917">Join response fragments</text><path d="M171.5,372.7734 L236.5,372.7734 L236.5,380.7734 L226.5,390.7734 L171.5,390.7734 L171.5,372.7734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:2.0;" width="284.5" x="171.5" y="372.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="186.5" y="387.2686">opt</text><polygon fill="#A80036" points="399,409.4766,409,413.4766,399,417.4766,403,413.4766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="237" x2="405" y1="413.4766" y2="413.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="244" y="408.6201">Cancel</text><polygon fill="#A80036" points="248,439.8281,238,443.8281,248,447.8281,244,443.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="242" x2="415" y1="443.8281" y2="443.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="254" y="438.9717">Cancel Acknowledgement</text><polygon fill="#A80036" points="86,477.1797,76,481.1797,86,485.1797,82,481.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="80" x2="231" y1="481.1797" y2="481.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="92" y="476.3232">Aggregated Response</text><!--MD5=[fd676671b876e392f22713f63b1dbff2]
@startuml
hide footbox


box "IPF Application"
participant "Client Camel Route" as Client
participant "IPF Producer" as PRO
end box
participant Server

Client -> PRO: Request
note left of Client: .to(...)
activate PRO
PRO -> Server: Request
activate Server

loop n-1 times
    Server - -> PRO : Fragment of response
    PRO -> Server : Request for next fragment
end

Server - -> PRO : Last fragment of response
deactivate Server
|||
PRO -> PRO : Join response fragments

opt
    PRO -> Server : Cancel
    activate Server
    Server - -> PRO: Cancel Acknowledgement
    deactivate Server
end

PRO - -> Client : Aggregated Response
deactivate PRO

@enduml

PlantUML version 1.2022.1(Tue Feb 01 19:19:58 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: de
Country: CH
--></g></svg>