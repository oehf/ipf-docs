<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="555px" preserveAspectRatio="none" style="width:686px;height:555px;background:#FFFFFF;" version="1.1" viewBox="0 0 686 555" width="686px" zoomAndPan="magnify"><defs><filter height="300%" id="f15r0kaln5d5kr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="536.5313" style="stroke:#A80036;stroke-width:1.0;" width="330.5" x="1" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="117.75" y="19.4951">IPF Application</text><rect fill="#FFFFFF" filter="url(#f15r0kaln5d5kr)" height="457.5703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="70" y="72.9609"/><rect fill="#FFFFFF" filter="url(#f15r0kaln5d5kr)" height="435.2188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="272" y="95.3125"/><rect fill="#FFFFFF" filter="url(#f15r0kaln5d5kr)" height="180.1094" style="stroke:#000000;stroke-width:2.0;" width="455.5" x="216.5" y="206.0156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="75" x2="75" y1="62.9609" y2="548.5313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="276.5" x2="276.5" y1="62.9609" y2="548.5313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="632" x2="632" y1="62.9609" y2="548.5313"/><rect fill="#FEFECE" filter="url(#f15r0kaln5d5kr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="136" x="5" y="26.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="12" y="47.8848">Client Camel Route</text><rect fill="#FEFECE" filter="url(#f15r0kaln5d5kr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="97" x="226.5" y="26.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="233.5" y="47.8848">IPF Producer</text><rect fill="#FEFECE" filter="url(#f15r0kaln5d5kr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="56" x="602" y="26.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="609" y="47.8848">Server</text><rect fill="#FFFFFF" filter="url(#f15r0kaln5d5kr)" height="457.5703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="70" y="72.9609"/><rect fill="#FFFFFF" filter="url(#f15r0kaln5d5kr)" height="435.2188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="272" y="95.3125"/><polygon fill="#A80036" points="260,91.3125,270,95.3125,260,99.3125,264,95.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="80" x2="266" y1="95.3125" y2="95.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="87" y="90.4561">Request with a Paging control</text><path d="M5,108.3125 L5,134.3125 L61,134.3125 L61,118.3125 L51,108.3125 L5,108.3125 " fill="#FBFB77" filter="url(#f15r0kaln5d5kr)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M51,108.3125 L51,118.3125 L61,118.3125 L51,108.3125 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="11" y="126.8076">.to(...)</text><polygon fill="#A80036" points="620,162.0156,630,166.0156,620,170.0156,624,166.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="282" x2="626" y1="166.0156" y2="166.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="289" y="161.1592">Request with a Paging control</text><path d="M216.5,206.0156 L289.5,206.0156 L289.5,214.0156 L279.5,224.0156 L216.5,224.0156 L216.5,206.0156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="180.1094" style="stroke:#000000;stroke-width:2.0;" width="455.5" x="216.5" y="206.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="231.5" y="220.5107">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="271" x="304.5" y="219.4346">[As long as more than one response page is left]</text><polygon fill="#A80036" points="293,259.0703,283,263.0703,293,267.0703,289,263.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="287" x2="631" y1="263.0703" y2="263.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="278" x="299" y="241.8623">Response page with a Paging control containing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="299" y="258.2139">overall entries count and a cookie</text><line style="stroke:#A80036;stroke-width:1.0;" x1="282" x2="324" y1="318.4219" y2="318.4219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="324" x2="324" y1="318.4219" y2="331.4219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="283" x2="324" y1="331.4219" y2="331.4219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="283" x2="293" y1="331.4219" y2="327.4219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="283" x2="293" y1="331.4219" y2="335.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="289" y="313.5654">Store the page</text><polygon fill="#A80036" points="620,374.125,630,378.125,620,382.125,624,378.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="282" x2="626" y1="378.125" y2="378.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="326" x="289" y="356.917">Request for a next page with a Paging control containing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="289" y="373.2686">page size and the cookie obtained from the server</text><polygon fill="#A80036" points="293,452.8281,283,456.8281,293,460.8281,289,456.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="287" x2="631" y1="456.8281" y2="456.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="299" y="435.6201">Last response page with Paging control containing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="299" y="451.9717">overall entries count and no cookie</text><line style="stroke:#A80036;stroke-width:1.0;" x1="282" x2="324" y1="487.1797" y2="487.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="324" x2="324" y1="487.1797" y2="500.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="283" x2="324" y1="500.1797" y2="500.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="283" x2="293" y1="500.1797" y2="496.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="283" x2="293" y1="500.1797" y2="504.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="289" y="482.3232">Aggregate all collected pages</text><polygon fill="#A80036" points="86,526.5313,76,530.5313,86,534.5313,82,530.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="80" x2="276" y1="530.5313" y2="530.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="92" y="525.6748">Response</text><!--MD5=[8e609013f0a1b2e61b0f974757c78ebf]
@startuml
hide footbox

box "IPF Application"
participant "Client Camel Route" as Route
participant "IPF Producer" as Producer
end box

participant "Server"

activate Route
Route -> Producer: Request with a Paging control
note left of Route: .to(...)
activate Producer
Producer -> Server : Request with a Paging control

|||
loop As long as more than one response page is left
    Server - -> Producer: Response page with a Paging control containing\noverall entries count and a cookie
|||
    Producer ->> Producer: Store the page
    Producer -> Server: Request for a next page with a Paging control containing\npage size and the cookie obtained from the server
end

|||
Server - -> Producer: Last response page with Paging control containing\noverall entries count and no cookie
Producer ->> Producer: Aggregate all collected pages
Producer - -> Route: Response

deactivate Producer
deactivate Route

@enduml

PlantUML version 1.2022.1(Tue Feb 01 19:19:58 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: de
Country: CH
--></g></svg>